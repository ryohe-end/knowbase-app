version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci

        # ============================
        # üîç env Ëß£ÊòéÔºàÁßòÂØÜ„ÅØÂá∫„Åï„Å™„ÅÑÔºâ
        # ============================
        - echo "BUILD_HAS_TEMPLATE=$([ -n \"$TEMPLATE_FILE_ID\" ] && echo yes || echo no)"
        - echo "BUILD_HAS_PARENT=$([ -n \"$TEMPLATE_COPY_PARENT_FOLDER_ID\" ] && echo yes || echo no)"
        - echo "BUILD_HAS_SA=$([ -n \"$GOOGLE_SERVICE_ACCOUNT_JSON\" ] && echo yes || echo no)"
        - echo "BUILD_NODE_ENV=${NODE_ENV:-unset}"
        # ============================

    build:
      commands:
        - npm run build

  artifacts:
    baseDirectory: .next
    files:
      - "**/*"

  cache:
    paths:
      - node_modules/**/*
